<button mat-button (click)="addNewRecord()">Add New Record</button>
<div class="mat-elevation-z8">
  <table mat-table [dataSource]="dataSource" matSort>
    <ng-container *ngFor="let colName of dynamicColumns; index as i;" [matColumnDef]="colName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{displayColumnNames[i]}} </th>
      <td mat-cell *matCellDef="let element">
        <div *ngIf="element.editing && colName === 'writer'"  class="writer-column">
          <mat-select [(value)]="element[colName]" multiple>
            <mat-option *ngFor="let option of options" [value]="option">{{option}}</mat-option>
          </mat-select>
        </div>
        <div *ngIf="isTypeOf(element[colName],'boolean')">
          <mat-checkbox [checked]="element.active" [disabled]="!element.editing"></mat-checkbox>
        </div>
        <div *ngIf="element.editing && element === 'last_update'">
          <input type="datetime-local" [(ngModel)]="element[colName]">
        </div>
        <div *ngIf="element.editing && colName === 'minutes'">
          <input type="number" [(ngModel)]="element[colName]" (ngModelChange)="validateMinutes(element)">
        </div>
        <div *ngIf="element.editing && colName !== 'writer' && colName !== 'active' && colName !== 'last_update' && colName !== 'minutes'">
          <input [(ngModel)]="element[colName]">
        </div>
        <div *ngIf="!element.editing && !isTypeOf(element[colName],'boolean')">
          <div>{{element[colName]}}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="edit">
      <th mat-header-cell *matHeaderCellDef> Edit </th>
      <td mat-cell *matCellDef="let element">
        <button mat-button (click)="editRow(element)">{{element.editing ? 'Save' : 'Edit'}}</button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="dynamicColumns.concat('edit')"></tr>
    <tr mat-row *matRowDef="let row; columns: dynamicColumns.concat('edit');"></tr>
  </table>
</div>
